Chap 1.5 循环控制
==================
作者：摘自郭炜编著《新标准C++程序设计》
时间：2015-07-12  


循环控制结构
-----------------
我们常常需要在程序里成千上万次地执行同样的操作。比如，要求写一个程序，依次输出1到10000的所有整数。我们不可能用写10000条cout语句的笨办法来实现，合理的一种做法是让一个变量的值初始值等于0，然后反复执行以下操作10000次：

```
该变量值增加1
输出该变量的值
```

程序设计语言里都会有将某些语句重复执行若干次的机制，这个机制就叫循环结构。




### 用 for 语句实现循环结构

C++提供了for语句，用来重复执行相同的语句若干次，执行的次数一般是某个常量，或某个变量的值。for语句的基本格式如下：

```cpp
for( 表达式1 ;表达式2;表达式3)  {
	语句组
}
```

如果语句组只由一条语句构成，那么也可以去掉“{}”。
通常，在需要将一些语句循环执行若干次的情况下，使用for语句比较方便。
for语句的执行过程如下：

```
1)	计算 “表达式1”。
2)	计算 “表达式2”，如果其值为true，则执行“{ }”中
的语句组，然后转到3)；如果为false,则不再执行“{}”
中的语句组，for语句结束，转到5)。
3)	计算“表达式3”。
4)	转到2)。
5)	从for语句后面继续往下执行程序。
```

来看一个for语句的例子：

```cpp
int i;                                                    
for( i = 0;i < 26; ++i ) {
		cout << char('a'+i ) << endl;
}
```
上面这个for语句，由于循环里只有一条语句，“{}”其实也可以去掉。这条for语句的作用是依次输出26个小写字母。由于字符'a'  ～ 'z'的ASCII码是连续的，所以'a'+i就是第i个字母的ASCII码（'a'算第0个字母，'z'算第25个），将'a'+i 转换成char类型输出，就会输出第i个字母。上述for语句，每次循环都输出第i个字母，然后i的值增加1。只要i的值还小于26，就依然会执行循环。i的值在循环开始执行前被置成了0，因此循环一共会执行26次。
上面语句中的i用来控制循环执行的次数，称为循环控制变量。一段程序里经常会用到多个for循环。大家一般习惯将循环控制变量定义为i或j，写一个for循环之前，就要想想是不是要定义循环控制变量i,j， 如果前面已经定义过了，就不能再定义，否则编译的时候会引起变量重复定义的错误 --- 老要想这件事，比较麻烦。因此C++允许写for语句的时候，在“表达式1”处定义一个或多个变量，而且这些变量的作用域仅限于for语句之内。这样，就可以在总是在“表达式1”处定义循环控制变量，不用管前面是不是定义过了。于是，先输出26个小写字母，然后再间隔着输出13个大写字母的程序，可以如下编写：

```cpp
for( int i = 0;i < 26; ++i ) 
	cout << char('a'+i ) << endl;
	for( int i = 0;i < 26; i+=2 ) //循环控制变量并非每次只能加1
	cout << char('A'+i ) << endl;

```

不用担心两个i会导致重复定义的错误，因为它们各自的作用域（就是能起作用的范围）都仅限于它所处的for语句内。
对循环控制变量i进行加1 的时候，许多程序员以及教科书都会写“i++”，而不是 “++i”。表面上看没有区别，实际上“++i”的写法是一种更好的习惯，显得更加专业和规范，因为++i比i++执行速度更快。尤其在学了“运算符重载”和“标准模板库STL”后就更能体会这一点了
for循环结构里的“表达式1”和“表达式3”都可以是用逗号连接的若干个表达式。比如下面的程序片段：

```cpp
for( int i= 15, j = 0; i > j; i-=2 ,j+= 3)
	cout << i << "," j << endl;
```
输出结果是：
```
15,0
13,3
11,6
```
例题: 请写一个程序，输入一个正整数n，输出它的所有因子。

此程序的基本思路就是枚举，对于不超过n的每个正整数，都判断一下是否是n的因子，如果是，则输出。

```cpp
1.	#include <iostream>
2.	using namespace std;
3.	int main()
4.	{
5.		int n;
6.		cin >> n;
7.		for( int i = 1;i <= n; ++i) 
8.	 		if( n % i == 0 )
9.	 			cout << i << endl;
10.	  	return 0;
11.	}
```

上面的for循环里只有一条if语句，if语句里也只有一条输出语句，所以就都用不着写“{}”了。
该程序枚举的顺序是从小到大。如果要求以从大到小的顺序输出所有因子，那么枚举的顺序也应该从大到小，程序中的for循环可以如下改写：

```cpp
for( int i = n;i >= 1; --i ) 
	if( n % i == 0 )
		 cout << i << endl; 

```
在一个for循环里还可以执行另一个for循环。例如下面的两重循环：

```cpp
	for(int i = 0;i < n; ++ i) {
		……
		for(int j = 0; j < m; ++j  ) {
			……
		}
		……
	}
```


假设n和m的值在执行过程中不发生变化，那么外重循环每执行1次，内重循环就执行m次，内重循环的执行次数一共是n×m次。在上面的程序片段里，内重循环每次开始的时候，都会先将j的值初始化为0。


例题: 给定正整数n和m,在1至n这n个数中，取出两个不同的数，使得其和是m的因子，问有多少种不同的取法。
解题的思路就是枚举所有两个数的不同取法，看其和是否为m的因子，如果是，就将总取法数目加1。枚举取两个数的不同取法，可以用两重for循环实现。程序如下：

```cpp
1.	#include <iostream>
2.	using namespace std;
3.	int main()
4.	{
5.		int n,m;
6.		int total = 0;  //取法总数
7.		cin >> n >> m;
8.		for( int i = 1; i < n; ++i )  //取第一个数，共n-1种取法
9.			for( int j = i + 1; j <= n; ++j ) //第二个数要比第一个数大,以免取法重复
10.				if( m % (i + j) == 0 )
11.			  		  ++ total ;
12.	     cout << total;  
13.	  	return 0;
14.	}
```


另外，for 语句括号里面的“表达式1”，“表达式2”，“表达式3”任何一个都可以不写，甚至可以全都不写，但是“;”必须保留。如：

for(  ; i < 100; ++ i )  
cout << i ;

假设i在for语句之前已经有合理的值了，那么上面的for语句里就没必要写“表达式1”了。
如果不写“表达式2”，就意味着永远执行循环（也叫死循环）。比如:

for( ; ; ) 
		cout << “hello” <<endl;

上面语句就会不停输出”hello”。
在for( ; ; ) 这样的循环里可以通过“break”语句跳出循环，后文会提到。












**表达式**是由操作数(常量和变量)和运算符按一定的语法形式组成的符号序列。  
根据运算符的不同，可以分为**算术表达式**、**关系表达式**、**逻辑表达式**、**位运算表达式**、**赋值表达式**和**条件表达式**等基本类型。  
表达式也同变量类似，具有值(但是不能改变)和数据类型。  

|表达式类型    |例子|
|:-------:|:--------:|
|算术表达式|x+3-2*y|
|关系表达式|3>(x+y)|
|逻辑表达式|x!=0 && y>2|
|位运算表达式|x&(1<<n)|
|赋值表达式|x=y=2|
|条件表达式|x>y?x:y|

算术表达式的值与数据类型
------------------------
### 算术表达式
算是表达式是由操作数(常量和变量)和算术运算符连接以来的表达式。  
算术运算符包括```+``` ```-``` ```*``` ```/``` ```%``` ```(``` ```)```。除法```/```在整形运算中是整除，浮点数类型运算中是浮点数除法。```%``` 是取余运算只能用在整型运算中。

以下是一些合法的算术表达式：  
```1 + 2```  
```X + 3 – 2 + y * 5```  
```(a + b) / z + 0.5 * 2```  

### 算术表达式的值
算术表达式的运算结果就是算术表达式的值。同数学运算一样，算术运算符是有**优先级**的，例如括号优先级最高，乘除比加减运算级高等。  
算一算以下表达式的值：  
```1 + 2```  
x=3, y=5时,  ```x + 3 – 2 + y * 5```  
a=0.1, b=0.2, z=0.3时, ```(a + b) / z + 0.5 * 2```  
结果依次是：  
3  
32  
2.0  

###算术表达式的数据类型
算术表达式也是有数据类型的，可能是整形或者浮点数类型。当两个不同数据类型的表达式一起运算时，结果的类型是其中较"**高级**"的数据类型 (双精度>单精度>长整型>整型)。  
例如```1+234```的数据类型是整型，```0.5+234```的数据类型是浮点型，```3*4```的数据类型是整型，```3*4.0```的数据类型是浮点型。  

设有以下变量定义，
```cpp
int x = 2;
float y = 4;
int z = 3;
```
(x + y) / 2 的数据类型和值是什么？  
(x + z) / 2 的数据类型和值是什么？  
y + (x + z) / 2的数据类型和值是什么？  
答案：  
(x + y) / 2 的数据类型是float，值是3.0。  
(x + z) / 2 的数据类型是int,值是2(注意这里除法是整除)。  
y + (x + z) / 2的数据类型是float，值是4.0。  

用算术表达式给变量赋值
----------------------
我们可以用包含算术表达式的**赋值语句**给变量赋值：
```cpp
变量 = 算术表达式;
```

需要注意的是，赋值语句的作用是将算术表达式的值**赋予**变量。变量的值在下次被赋值语句改变之前是不变的。它与数学中的等式不同，并不表示一个恒等关系。  

我们看下面的例子：
```cpp
int a, b;
a = 1;
b = 2 * a;
printf("%d %d\n", a, b);
a = 2;
printf("%d %d\n", a, b);
```
以上程序的输出是
```
1 2
2 2
```
可见```b = 2 * a```并不表示**令b=2a**这种数学关系，b的值并不会随着a的变化而改变。  


